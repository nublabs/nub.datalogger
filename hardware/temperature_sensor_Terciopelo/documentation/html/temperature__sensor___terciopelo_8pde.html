<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>temperature sensor: /Users/nikki/nublabs/nub.datalogger/hardware/temperature_sensor_Terciopelo/temperature_sensor_Terciopelo.pde File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>/Users/nikki/nublabs/nub.datalogger/hardware/temperature_sensor_Terciopelo/temperature_sensor_Terciopelo.pde File Reference</h1><code>#include &quot;<a class="el" href="temperature__sensor__board__v2_8h-source.html">temperature_sensor_board_v2.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="communications_8h-source.html">communications.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="nublogger_8h-source.html">nublogger.h</a>&quot;</code><br>

<p>
<div class="dynheader">
Include dependency graph for temperature_sensor_Terciopelo.pde:</div>
<div class="dynsection">
<p><center><img src="temperature__sensor___terciopelo_8pde__incl.png" border="0" usemap="#/Users/nikki/nublabs/nub.datalogger/hardware/temperature_sensor_Terciopelo/temperature_sensor_Terciopelo.pde_map" alt=""></center>
<map name="/Users/nikki/nublabs/nub.datalogger/hardware/temperature_sensor_Terciopelo/temperature_sensor_Terciopelo.pde_map">
<area shape="rect" href="temperature__sensor__board__v2_8h.html" title="temperature_sensor_board_v2.h" alt="" coords="58,80,276,107"><area shape="rect" href="communications_8h.html" title="communications.h" alt="" coords="300,80,431,107"><area shape="rect" href="nublogger_8h.html" title="nublogger.h" alt="" coords="455,80,548,107"></map>
</div>

<p>
<a href="temperature__sensor___terciopelo_8pde-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="temperature__sensor___terciopelo_8pde.html#4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="temperature__sensor___terciopelo_8pde.html#fe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="fe461d27b9c48d5921c00d521181f12f"></a><!-- doxytag: member="temperature_sensor_Terciopelo.pde::loop" ref="fe461d27b9c48d5921c00d521181f12f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="temperature__sensor___terciopelo_8pde-source.html#l00065">65</a> of file <a class="el" href="temperature__sensor___terciopelo_8pde-source.html">temperature_sensor_Terciopelo.pde</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00066"></a>00066 {
<a name="l00067"></a>00067 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4fc01d736fe50cf5b977f755b675f11d"></a><!-- doxytag: member="temperature_sensor_Terciopelo.pde::setup" ref="4fc01d736fe50cf5b977f755b675f11d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
nublogger temperature sensor Terciopelo(+)<p>
Alex Hornstein 11.19.08 <a href="mailto:alex@nublabs.com">alex@nublabs.com</a> datalogger.nublabs.com<p>
(+)In keeping with the arduino nomenclature, we are naming all our code revisions with Spanish names of venemous snakes. The Terciopelo, or fer-de-lance is a pit viper common in central and northwestern south america. It has a powerful venom that, left untreated, can cause necrosis, brain hemorrhaging, renal failure and death. It's also capable of spraying venom through its fangs for up to 6 feet. Cool, huh? This is a sensor for nublab's datalogging system. The datalogger is a two-part system: There is a USB dongle that plugs into a computer that allows the computer to talk to a wireless Zigbee network, and then there are battery-powered sensors that sense data about the environemnt. The sensors collect data and convert it into human-readable units, and then send the data as plaintext over the wireless network to the computer, where it is stored and logged. Any sensor that will work with this system must implement the <a class="el" href="nublogger_8h.html#3fdb2350c3f98c0de0f0ae3c831a8b14" title="This function tells the computer of the datalogger&#39;s existence.">discover()</a>, <a class="el" href="nublogger_8h.html#e369b3765489ee8bd0ea791c1843630f" title="configure() runs if the computer is trying to change the sensor&#39;s sample rate...">configure()</a> and sample() functions, as well as be identifiable by a unique name<p>
The <a class="el" href="nublogger_8h.html#3fdb2350c3f98c0de0f0ae3c831a8b14" title="This function tells the computer of the datalogger&#39;s existence.">discover()</a> function is a short communication sequence when the sensor is first turned on where it broadcasts its name over the network and ensures that the computer recognizes it and is ready to configure it and log its data. The sensor also sends the units of whatever value it will be reporting.<p>
the <a class="el" href="nublogger_8h.html#e369b3765489ee8bd0ea791c1843630f" title="configure() runs if the computer is trying to change the sensor&#39;s sample rate...">configure()</a> function is triggered by a flag sent by the computer that indicates that the computer would like to change the datalogger's sample rate. <a class="el" href="nublogger_8h.html#e369b3765489ee8bd0ea791c1843630f" title="configure() runs if the computer is trying to change the sensor&#39;s sample rate...">configure()</a> is another communication sequence in which the computer sends a sample interval in hours, minutes and seconds to the datalogger. By default, the datalogger samples every second.<p>
the sample() function is called by the sensor every sample interval. sample() reads a value from whatever sensing element (Thermistor, current sensor, light sensor, etc) the particular sensor uses, converts it to physical units (degrees celsius, amps, lux, etc) and sends out a string over the wireless network with the sensor's unique name and its sensed values.<p>
the name: each sensor should have a unique name burnt into its eeprom that makes it uniquely identifiable in the network. Nublabs is using a list of north and south american baby names which is available at datalogger.nublabs.com This particular sensor is a temperature sensor using an NTC thermistor. The thermistor is a resistive element. We sense it using two resistor dividers--one resistor, R1 which connects from Vcc to the thermistor, and another resistor that connects from the other end of the thermistor to ground. We measure the voltage at both ends of the thermistor using separate Analog to Digital Converter (ADC) pins. This allows us to factor out any effect changing battery voltage has on our temperature measurement. This code is written for version 2 of the sensor hardware. A pdf of the sensor schematic and board layout is available at datalogger.nublabs.com 
<p>Definition at line <a class="el" href="temperature__sensor___terciopelo_8pde-source.html#l00059">59</a> of file <a class="el" href="temperature__sensor___terciopelo_8pde-source.html">temperature_sensor_Terciopelo.pde</a>.</p>

<p>References <a class="el" href="temperature__sensor__board__v2_8h-source.html#l00035">initializeSensor()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00060"></a>00060 {
<a name="l00061"></a>00061   <a class="code" href="temperature__sensor__board__v2_8h.html#f6c9587ccbcf223f8c79f508c2fef366" title="this function configures all the digital communication pins as input or output pins...">initializeSensor</a>();
<a name="l00062"></a>00062   Serial.begin(19200);
<a name="l00063"></a>00063 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Nov 19 15:07:50 2008 for temperature sensor by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7 </small></address>
</body>
</html>
